System.register("chunks:///_virtual/AutoModeButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ScreenButton.ts","./SunController.ts"],(function(t){"use strict";var o,n,e,u,r,s;return{setters:[function(t){o=t.inheritsLoose},function(t){n=t.cclegacy,e=t._decorator,u=t.Node},function(t){r=t.ScreenButton},function(t){s=t.SunController}],execute:function(){var c;n._RF.push({},"07e00Jgsn1Ht6dVNluKj2rz","AutoModeButton",void 0);var i=e.ccclass;e.property,t("AutoModeButton",i("AutoModeButton")(c=function(t){function n(){return t.apply(this,arguments)||this}o(n,t);var e=n.prototype;return e.start=function(){t.prototype.start.call(this),this.isPushed=!0,this.toggleStatus(),this.node.off(u.EventType.TOUCH_END,this.onTouchEnd,this),s.eventTarget.on(s.EventType.TOGGLE_MANUAL_MODE,this.onTouchEnd,this)},e.onTouchStart=function(){t.prototype.onTouchStart.call(this),s.eventTarget.emit(s.EventType.TOGGLE_AUTO_MODE)},n}(r))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/DetailsRender.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ShadowDrawer.ts"],(function(e){"use strict";var r,t,a,o,n,i,l,s,h;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,a=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){n=e.cclegacy,i=e._decorator,l=e.Label,s=e.Component},function(e){h=e.ShadowDrawer}],execute:function(){var u,c,d,w,p,f,D;n._RF.push({},"73043/gErlG85Ch2AGjHtj3","DetailsRender",void 0);var b=i.ccclass,y=i.property;e("DetailsRender",(u=b("DetailsRender"),c=y({type:h}),d=y({type:l}),u((f=r((p=function(e){function r(){for(var r,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return r=e.call.apply(e,[this].concat(n))||this,a(r,"shadowDrawer",f,o(r)),a(r,"valueLabel",D,o(r)),r}t(r,e);var n=r.prototype;return n.onLoad=function(){this.shadowDrawer&&this.valueLabel||(this.enabled=!1)},n.update=function(e){this.valueLabel.string=Math.floor(this.shadowDrawer.shadowOpacity)+"\n"+Math.floor(this.shadowDrawer.shadowAngle)+"\n"+Math.floor(this.shadowDrawer.shadowLength)+"\n"+Math.floor(this.shadowDrawer.shadowBlurWidth)},r}(s)).prototype,"shadowDrawer",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=r(p.prototype,"valueLabel",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=p))||w));n._RF.pop()}}}));

System.register("chunks:///_virtual/HouseFactory.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ShadowDrawer.ts"],(function(e){"use strict";var t,o,n,r,s,a,i,u,c,h,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){s=e.cclegacy,a=e._decorator,i=e.EventTarget,u=e.Prefab,c=e.Component,h=e.instantiate},function(e){p=e.ShadowDrawer}],execute:function(){var f,l,d,y,_,v,g;s._RF.push({},"429c9Uamr1JUpO90LpIrSkF","HouseFactory",void 0);var E,H=a.ccclass,b=a.property,R=e("houseFactoryEventTarget",new i);!function(e){e[e.REBUILD_HOUSES=0]="REBUILD_HOUSES"}(E||(E={}));e("HouseFactory",(f=H("HouseFactory"),l=b({type:[u]}),f(((g=function(e){function t(){for(var t,o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return t=e.call.apply(e,[this].concat(s))||this,n(t,"prefabs",_,r(t)),n(t,"houseCount",v,r(t)),t._houses=[],t}o(t,e);var s=t.prototype;return s.onLoad=function(){this._generateHouses(),R.on(E.REBUILD_HOUSES,this.onRebuildHouses,this)},s._getRandomPlace=function(e){return Math.floor(Math.random()*e-e/2)},s._generateHouses=function(){var e=this;this.node.children.forEach((function(e){return e.destroy()})),this._houses=[];for(var t=2*Math.ceil(Math.sqrt(this.houseCount)),o=0,n=function(){var n=e._getRandomPlace(t),r=e._getRandomPlace(t),s=void 0!==e._houses.find((function(e){return e.x===n&&e.y===r}));if(0!==n&&0!==r&&!s){var a=e.prefabs[Math.floor(Math.random()*e.prefabs.length)];e._houses.push({node:h(a),x:n,y:r,posX:80*(n-r),posY:-40*(n+r)}),o++}};o<this.houseCount;)n();this._houses.sort((function(e,t){return t.posY-e.posY})),this._houses.forEach((function(t){t.node.setPosition(t.posX,t.posY),t.node.setParent(e.node)})),p.eventTarget.emit(p.EventType.REDRAW_SHADOW)},s.onRebuildHouses=function(){p.eventTarget.emit(p.EventType.CLEAR_SHADOW_OBJECTS),this._generateHouses()},t}(c)).eventTarget=R,g.EventType=E,_=t((y=g).prototype,"prefabs",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=t(y.prototype,"houseCount",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 25}}),d=y))||d));s._RF.pop()}}}));

System.register("chunks:///_virtual/InputHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ShadowDrawer.ts","./SunController.ts"],(function(t){"use strict";var n,o,e,s,r,h,i,a,c;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator,s=t.UITransform,r=t.Node,h=t.v2,i=t.Component},function(t){a=t.ShadowDrawer},function(t){c=t.SunController}],execute:function(){var l;o._RF.push({},"586dfw+E1ZHwrsfKP5k2G3o","InputHandler",void 0);var u=e.ccclass;e.property,t("InputHandler",u("InputHandler")(l=function(t){function o(){for(var n,o=arguments.length,e=new Array(o),s=0;s<o;s++)e[s]=arguments[s];return(n=t.call.apply(t,[this].concat(e))||this)._shadowLength=30,n._shadowAngle=0,n._transform=null,n}n(o,t);var e=o.prototype;return e.start=function(){this._transform=this.getComponent(s),c.eventTarget.on(c.EventType.TOGGLE_MANUAL_MODE,this.switchOnControls,this),c.eventTarget.on(c.EventType.TOGGLE_AUTO_MODE,this.switchOffControls,this)},e.switchOnControls=function(){this.node.on(r.EventType.TOUCH_MOVE,this.onTouchMove,this)},e.switchOffControls=function(){this.node.off(r.EventType.TOUCH_MOVE,this.onTouchMove,this)},e.onTouchMove=function(t){var n=this._transform.contentSize,o=t.getUILocation(),e=h(o.x-n.width/2,o.y-n.height/2),s=Math.hypot(e.x,e.y)/7,r=180+Math.floor(180*Math.atan2(e.y,e.x)/Math.PI);r===this._shadowAngle&&r===this._shadowAngle||(this._shadowLength=s,this._shadowAngle=r,a.eventTarget.emit(a.EventType.REDRAW_SHADOW,this._shadowAngle,this._shadowLength))},o}(i))||l);o._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./AutoModeButton.ts","./ManualModeButton.ts","./RebuildButton.ts","./ScreenButton.ts","./DetailsRender.ts","./HouseFactory.ts","./InputHandler.ts","./ShadowCamera.ts","./ShadowDrawer.ts","./ShadowOwner.ts","./SunController.ts","./TipLabel.ts","./TransformAdapter.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/ManualModeButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ScreenButton.ts","./SunController.ts"],(function(t){"use strict";var n,o,e,r,u,c;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator,r=t.Node},function(t){u=t.ScreenButton},function(t){c=t.SunController}],execute:function(){var s;o._RF.push({},"568828+8x9C6J4+S+Gk728F","ManualModeButton",void 0);var i=e.ccclass;e.property,t("ManualModeButton",i("ManualModeButton")(s=function(t){function o(){return t.apply(this,arguments)||this}n(o,t);var e=o.prototype;return e.start=function(){t.prototype.start.call(this),this.node.off(r.EventType.TOUCH_END,this.onTouchEnd,this),c.eventTarget.on(c.EventType.TOGGLE_AUTO_MODE,this.onTouchEnd,this)},e.onTouchStart=function(){t.prototype.onTouchStart.call(this),c.eventTarget.emit(c.EventType.TOGGLE_MANUAL_MODE)},o}(u))||s);o._RF.pop()}}}));

System.register("chunks:///_virtual/RebuildButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HouseFactory.ts","./ScreenButton.ts"],(function(t){"use strict";var e,o,n,u,r;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator},function(t){u=t.HouseFactory},function(t){r=t.ScreenButton}],execute:function(){var c;o._RF.push({},"54a090Qd61H8JOWIFJWUmvv","RebuildButton",void 0);var i=n.ccclass;n.property,t("RebuildButton",i("RebuildButton")(c=function(t){function o(){return t.apply(this,arguments)||this}return e(o,t),o.prototype.onTouchStart=function(){t.prototype.onTouchStart.call(this),u.eventTarget.emit(u.EventType.REBUILD_HOUSES)},o}(r))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/ScreenButton.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,o,i,r,s,n,u,h,l,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){s=t.cclegacy,n=t._decorator,u=t.Node,h=t.Sprite,l=t.Color,c=t.Component}],execute:function(){var a,p,d,g,_,f,y;s._RF.push({},"60c7fGZAoRBO5H9XJpQA35i","ScreenButton",void 0);var S=n.ccclass,C=n.property;t("ScreenButton",(a=S("ScreenButton"),p=C({type:u}),d=C({type:u}),a((f=e((_=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),n=0;n<o;n++)s[n]=arguments[n];return e=t.call.apply(t,[this].concat(s))||this,i(e,"edgeRenderNode",f,r(e)),i(e,"textNode",y,r(e)),e.isPushed=!1,e._sprite=null,e._startColor=null,e}o(e,t);var s=e.prototype;return s.start=function(){this.node.on(u.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(u.EventType.TOUCH_END,this.onTouchEnd,this),this._sprite=this.getComponent(h),this._sprite&&(this._startColor=this._sprite.color.clone())},s.toggleStatus=function(){this.edgeRenderNode&&this.edgeRenderNode.setPosition(0,this.isPushed?17:-25),this.textNode&&this.textNode.setPosition(0,this.isPushed?-3:5),this._sprite&&(this._sprite.color=this.isPushed?new l(.5*this._startColor.r,.5*this._startColor.g,.5*this._startColor.b):this._startColor)},s.onTouchStart=function(){this.isPushed=!0,this.toggleStatus()},s.onTouchEnd=function(){this.isPushed=!1,this.toggleStatus()},e}(c)).prototype,"edgeRenderNode",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=e(_.prototype,"textNode",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=_))||g));s._RF.pop()}}}));

System.register("chunks:///_virtual/ShadowCamera.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,o,r,a,n,s,h,c,p,l,m,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,n=t._decorator,s=t.EventTarget,h=t.Camera,c=t.View,p=t.view,l=t.Rect,m=t.size,u=t.UITransform}],execute:function(){var d,f,C,g,y,_;a._RF.push({},"e35e3AdLfZLFZ2hWcXsEN39","ShadowCamera",void 0);var v,T=n.ccclass,w=n.property,z=new s;!function(t){t[t.STICK_NODE_TO_CAMERA=0]="STICK_NODE_TO_CAMERA"}(v||(v={}));t("ShadowCamera",(d=T("ShadowCamera"),f=w({type:h,tooltip:"camera to copy orthoHeight property"}),d(((_=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),n=0;n<i;n++)a[n]=arguments[n];return e=t.call.apply(t,[this].concat(a))||this,o(e,"mainCamera",y,r(e)),e._transform=null,e}i(e,t);var a=e.prototype;return a.onLoad=function(){t.prototype.onLoad.call(this),this.enabled&&(this.targetTexture?(c.instance.on("canvas-resize",this.onCanvasResize,this),z.on(v.STICK_NODE_TO_CAMERA,this.onStickNodeToCamera,this)):this.enabled=!1)},a.start=function(){this.onCanvasResize()},a.getVisibleRect=function(){var t=p.getVisibleSize(),e=t.width/t.height,i=this.node.worldPosition,o=2*this.orthoHeight,r=e*o;return new l(i.x-.5*r,i.y-.5*o,r,o)},a.copyMainCameraProps=function(){this.mainCamera&&(this.projection=this.mainCamera.projection,this.projection===h.ProjectionType.ORTHO?this.orthoHeight=this.mainCamera.orthoHeight:console.warn("Shadow camera projection must be ortho!"))},a.onCanvasResize=function(){this.copyMainCameraProps();var t=this.getVisibleRect();if(this.targetTexture.resize(t.width,t.height),this._transform){var e=m(t.width,t.height);this._transform.setContentSize(e)}},a.onStickNodeToCamera=function(t,e){this.copyMainCameraProps(),this._transform=t.getComponent(u),this._transform.setContentSize(this.camera.width,this.camera.height);var i=this.node.getWorldPosition(),o=t.getWorldPosition();this.node.setWorldPosition(o.x,o.y,i.z),this.targetTexture.resize(this._transform.width,this._transform.height),e instanceof Function&&e(this.targetTexture)},e}(h)).eventTarget=z,_.EventType=v,y=e((g=_).prototype,"mainCamera",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=g))||C));a._RF.pop()}}}));

System.register("chunks:///_virtual/ShadowDrawer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ShadowCamera.ts"],(function(e){"use strict";var t,o,r,i,a,n,s,h,l,c,d,u,w,f,p,_,S,y,g,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.initializerDefineProperty,r=e.inheritsLoose,i=e.assertThisInitialized},function(e){a=e.cclegacy,n=e._decorator,s=e.EventTarget,h=e.EffectAsset,l=e.Graphics,c=e.Node,d=e.Layers,u=e.Sprite,w=e.SpriteFrame,f=e.v2,p=e.Vec2,_=e.Intersection2D,S=e.Material,y=e.Component,g=e.Color},function(e){b=e.ShadowCamera}],execute:function(){var E,v,C,R,m,O,A,D,G,T,k,M,W,L,P,B,z,x,I,H,J,N,F,j,U;a._RF.push({},"58a7babm2FIDZ4A1D9o+Bkv","ShadowDrawer",void 0);var q,K=n.ccclass,V=n.property,Z=new s;!function(e){e[e.REGISTER_SHADOW_OBJECT=0]="REGISTER_SHADOW_OBJECT",e[e.REDRAW_SHADOW=1]="REDRAW_SHADOW",e[e.CLEAR_SHADOW_OBJECTS=2]="CLEAR_SHADOW_OBJECTS"}(q||(q={}));var Q=K("ShadowRender")((C=t((v=function(e,t){o(this,"owner",C,this),o(this,"points",R,this),o(this,"scale",m,this),this.owner=e,this.points=t,this.scale=e.shadowScale}).prototype,"owner",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(v.prototype,"points",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=t(v.prototype,"scale",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),E=v))||E;e("ShadowDrawer",(O=K("ShadowDrawer"),A=V({tooltip:"color of shadow render"}),D=V({slide:!0,min:0,max:255,tooltip:"opacity of shadow render"}),G=V({tooltip:"angle of shadow casting"}),T=V({tooltip:"length of shadow render"}),k=V({tooltip:"degree of blurring shadow edges"}),M=V({type:h,tooltip:"effect for shadow graphics fill"}),W=V({type:h,tooltip:"effect for shadow graphics stroke"}),L=V({type:h,tooltip:"effect for shadow render texture"}),O(((U=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return t=e.call.apply(e,[this].concat(a))||this,o(t,"shadowColor",z,i(t)),o(t,"shadowOpacity",x,i(t)),o(t,"shadowAngle",I,i(t)),o(t,"shadowLength",H,i(t)),o(t,"shadowBlurWidth",J,i(t)),o(t,"fillEffect",N,i(t)),o(t,"strokeEffect",F,i(t)),o(t,"renderEffect",j,i(t)),t._shadowRenders=[],t._fillGraphics=null,t._strokeGraphics=null,t._renderMaterial=null,t}r(t,e);var a=t.prototype;return a.onLoad=function(){this._fillGraphics=this._createGraphics("FillNode",this.fillEffect),this._strokeGraphics=this._createGraphics("StrokeNode",this.strokeEffect),this._strokeGraphics.lineWidth=this.shadowBlurWidth,this._strokeGraphics.lineJoin=l.LineJoin.ROUND,Z.on(q.REGISTER_SHADOW_OBJECT,this.onRegisterShadowObject,this),Z.on(q.REDRAW_SHADOW,this.onRedrawShadow,this),Z.on(q.CLEAR_SHADOW_OBJECTS,this.onClearShadowObjects,this)},a.start=function(){this._createRenderNode(),this._drawShadow()},a._createGraphics=function(e,t){var o=new c(e),r=o.addComponent(l);return r.strokeColor=this.shadowColor,r.fillColor=this.shadowColor,o.layer=d.Enum.shadow,o.setParent(this.node),this._setShadowMaterial(r,t),r},a._createRenderNode=function(){var e=this,t=new c("RenderNode");t.layer=d.Enum.DEFAULT,t.setParent(this.node);var o=t.addComponent(u);b.eventTarget.emit(b.EventType.STICK_NODE_TO_CAMERA,t,(function(t){var r=new w;r.texture=t,o.spriteFrame=r,e._setShadowMaterial(o,e.renderEffect)}))},a._drawShadow=function(){var e=this,t=this.shadowAngle*(Math.PI/180);this._fillGraphics.clear(),this._strokeGraphics.clear(),this._shadowRenders.forEach((function(o){var r=[],i=f(0,0),a=f(0,0),n=f(Math.cos(t)*e.shadowLength*o.scale,Math.sin(t)*e.shadowLength/2*o.scale),s=o.points.map((function(e){return e.clone().add(n)}));o.points.forEach((function(t,a){e._checkPointInShadow(o.points,a,s,r),i=i.add(t)})),s.forEach((function(t,i){e._checkPointInShadow(s,i,o.points,r),a=a.add(t)})),i=i.multiplyScalar(1/o.points.length),a=a.multiplyScalar(1/s.length);var h=i.lerp(a,.5);r.sort((function(e,t){var o=p.subtract(f(),e,h),r=p.subtract(f(),t,h);return Math.atan2(o.y,o.x)-Math.atan2(r.y,r.x)})),e._fillGraphics.moveTo(r[0].x,r[0].y),e._strokeGraphics.moveTo(r[0].x,r[0].y);for(var l=1;l<r.length;l++)e._fillGraphics.lineTo(r[l].x,r[l].y),e._strokeGraphics.lineTo(r[l].x,r[l].y);e._fillGraphics.fill(),e._strokeGraphics.lineTo(r[0].x,r[0].y),e._strokeGraphics.stroke()}))},a._checkPointInShadow=function(e,t,o,r){var i=e[t],a=o[t],n=e.reduce((function(e,t){return e.push(t.equals(i)?a:t),e}),[]);_.pointInPolygon(i,n)||r.push(i)},a._setShadowMaterial=function(e,t){if(e&&t){var o=new S;o.initialize({effectAsset:t,defines:{USE_RGBE_CUBEMAP:!0}}),e.setMaterial(o,0),this._renderMaterial=e.sharedMaterial,this.setShadowColor(this.shadowColor),this.setShadowOpacity(this.shadowOpacity)}},a.setShadowColor=function(e){this.shadowColor=e,void 0!==this._renderMaterial.getProperty("shadowColor")&&this._renderMaterial.setProperty("shadowColor",e)},a.setShadowOpacity=function(e){this.shadowOpacity=e,void 0!==this._renderMaterial.getProperty("shadowOpacity")&&this._renderMaterial.setProperty("shadowOpacity",e/255)},a.setShadowAngle=function(e,t){void 0===t&&(t=!1),this.shadowAngle=e,t&&this._drawShadow()},a.setShadowLength=function(e,t){void 0===t&&(t=!1),this.shadowLength=e,t&&this._drawShadow()},a.setShadowBlurWidth=function(e,t){void 0===t&&(t=!1),this.shadowBlurWidth=e,this._strokeGraphics.lineWidth=e,t&&this._drawShadow()},a.onRegisterShadowObject=function(e,t){var o=this,r=t.map((function(e){return e.subtract(f(o.node.worldPosition.x,o.node.worldPosition.y))}));this._shadowRenders.push(new Q(e,r))},a.onRedrawShadow=function(e,t){void 0!==e&&(this.shadowAngle=e),void 0!==t&&(this.shadowLength=t),this._drawShadow()},a.onClearShadowObjects=function(){this._shadowRenders=[],this._drawShadow()},t}(y)).eventTarget=Z,U.EventType=q,z=t((B=U).prototype,"shadowColor",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new g(0,0,0)}}),x=t(B.prototype,"shadowOpacity",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 255}}),I=t(B.prototype,"shadowAngle",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),H=t(B.prototype,"shadowLength",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),J=t(B.prototype,"shadowBlurWidth",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),N=t(B.prototype,"fillEffect",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(B.prototype,"strokeEffect",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(B.prototype,"renderEffect",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=B))||P));a._RF.pop()}}}));

System.register("chunks:///_virtual/ShadowOwner.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ShadowDrawer.ts"],(function(e){"use strict";var t,o,i,r,n,l,a,s,c,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){n=e.cclegacy,l=e._decorator,a=e.PolygonCollider2D,s=e.v2,c=e.Component},function(e){h=e.ShadowDrawer}],execute:function(){var d,p,u,w,f,y;n._RF.push({},"2022dIqRIZE1K8gyVBRRitM","ShadowOwner",void 0);var _=l.ccclass,g=l.property,v=l.requireComponent;e("ShadowOwner",(d=_("ShadowOwner"),p=v(a),u=g({tooltip:"a multiplier for the length of the shadow (in other words, the height of the object casting the shadow)"}),d(w=p((y=t((f=function(e){function t(){for(var t,o=arguments.length,n=new Array(o),l=0;l<o;l++)n[l]=arguments[l];return t=e.call.apply(e,[this].concat(n))||this,i(t,"shadowScale",y,r(t)),t._collider=null,t}return o(t,e),t.prototype.onLoad=function(){var e=this;if(this._collider=this.getComponent(a),this._collider){this._collider.sensor=!0,this._collider.apply();var t=s(this.node.worldPosition.x,this.node.worldPosition.y),o=this._collider.offset,i=s(o.x*this.node.scale.x,o.y*this.node.scale.y),r=this._collider.points.map((function(o){var r=s(o.x*e.node.scale.x,o.y*e.node.scale.y);return t.clone().add(r).add(i)}));h.eventTarget.emit(h.EventType.REGISTER_SHADOW_OBJECT,this,r)}},t}(c)).prototype,"shadowScale",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),w=f))||w)||w));n._RF.pop()}}}));

System.register("chunks:///_virtual/SunController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ShadowDrawer.ts"],(function(t){"use strict";var e,r,i,o,a,n,s,h,l,u,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,n=t._decorator,s=t.EventTarget,h=t.Sprite,l=t.Color,u=t.Component},function(t){p=t.ShadowDrawer}],execute:function(){var c,d,w,f,S,_,g,M,D,y,A;a._RF.push({},"f87f8bo+D9EPr92p3+ruflb","SunController",void 0);var b,v=n.ccclass,C=n.property;!function(t){t[t.Auto=0]="Auto",t[t.Manual=1]="Manual"}(b||(b={}));var O,m=new s;!function(t){t[t.TOGGLE_AUTO_MODE=0]="TOGGLE_AUTO_MODE",t[t.TOGGLE_MANUAL_MODE=1]="TOGGLE_MANUAL_MODE"}(O||(O={}));t("SunController",(c=v("SunController"),d=C({type:p}),w=C({min:0,max:1,slide:!0}),c(((A=function(t){function e(){for(var e,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return e=t.call.apply(t,[this].concat(a))||this,i(e,"shadowDrawer",_,o(e)),i(e,"nightColor",g,o(e)),i(e,"twilightColor",M,o(e)),i(e,"dayColor",D,o(e)),i(e,"shiftSpeed",y,o(e)),e._mode=b.Auto,e._currentState=0,e._sprite=null,e._shiftSpeed=1,e}r(e,t);var a=e.prototype;return a.start=function(){this._shiftSpeed=this.shiftSpeed,this._sprite=this.getComponent(h),m.on(O.TOGGLE_AUTO_MODE,this.toggleAutoMode,this),m.on(O.TOGGLE_MANUAL_MODE,this.toggleManualMode,this)},a.update=function(t){this._mode===b.Auto&&(this._currentState=(this._currentState+t*this.shiftSpeed)%1,this.processSunShift())},a.processSunShift=function(){var t=(90+360*this._currentState)%360;if(this.shadowDrawer){var e=Math.sin(t/360*Math.PI*2);this.shadowDrawer.setShadowAngle(t);var r=(Math.sin(t/360*Math.PI*2)-.3)/1.3,i=Math.max(0,-140*r);this.shadowDrawer.setShadowOpacity(i);var o=Math.max(10,30+20*e);this.shadowDrawer.setShadowBlurWidth(o);var a=15*(.75+.25*Math.sin(this._currentState*Math.PI));this.shadowDrawer.setShadowLength(a,!0),this.shiftSpeed=this._shiftSpeed*(1+.5*e)}if(this._sprite){var n=(Math.sin(t/360*Math.PI*2)+.5)/1.5,s=new l;n<0?l.lerp(s,this.twilightColor,this.dayColor,-n):l.lerp(s,this.twilightColor,this.nightColor,n),this._sprite.color=s}},a.toggleAutoMode=function(){this._mode=b.Auto},a.toggleManualMode=function(){this._mode=b.Manual,this.shadowDrawer&&(this.shadowDrawer.setShadowAngle(90),this.shadowDrawer.setShadowOpacity(140),this.shadowDrawer.setShadowBlurWidth(10),this.shadowDrawer.setShadowLength(20,!0),this.shiftSpeed=this._shiftSpeed),this._sprite&&(this._sprite.color=new l(255,255,255,0))},e}(u)).eventTarget=m,A.EventType=O,_=e((S=A).prototype,"shadowDrawer",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=e(S.prototype,"nightColor",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new l(255,255,255)}}),M=e(S.prototype,"twilightColor",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new l(255,255,255)}}),D=e(S.prototype,"dayColor",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new l(255,255,255)}}),y=e(S.prototype,"shiftSpeed",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),f=S))||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/TipLabel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SunController.ts"],(function(e){"use strict";var t,n,i,o,r,l,a,u,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,a=e.Label,u=e.Component},function(e){p=e.SunController}],execute:function(){var s,c,T,b,f,g,d;r._RF.push({},"0fc1aQdpzlJdJ9zE2xJQj9J","TipLabel",void 0);var h=l.ccclass,M=l.property;e("TipLabel",(s=h("TipLabel"),c=M({type:a}),s((f=t((b=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,i(t,"label",f,o(t)),i(t,"manualModeTip",g,o(t)),i(t,"autoModeTip",d,o(t)),t}n(t,e);var r=t.prototype;return r.start=function(){p.eventTarget.on(p.EventType.TOGGLE_MANUAL_MODE,this.onToggleManualMode,this),p.eventTarget.on(p.EventType.TOGGLE_AUTO_MODE,this.onToggleAutoMode,this)},r.onToggleManualMode=function(){this.label&&(this.label.string=this.manualModeTip)},r.onToggleAutoMode=function(){this.label&&(this.label.string=this.autoModeTip)},t}(u)).prototype,"label",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(b.prototype,"manualModeTip",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=t(b.prototype,"autoModeTip",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),T=b))||T));r._RF.pop()}}}));

System.register("chunks:///_virtual/TransformAdapter.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(exports){"use strict";var _applyDecoratedDescriptor,_createClass,_initializerDefineProperty,_inheritsLoose,_assertThisInitialized,cclegacy,_decorator,Enum,UITransform,size,v2,director,Director,view,Component;return{setters:[function(e){_applyDecoratedDescriptor=e.applyDecoratedDescriptor,_createClass=e.createClass,_initializerDefineProperty=e.initializerDefineProperty,_inheritsLoose=e.inheritsLoose,_assertThisInitialized=e.assertThisInitialized},function(e){cclegacy=e.cclegacy,_decorator=e._decorator,Enum=e.Enum,UITransform=e.UITransform,size=e.size,v2=e.v2,director=e.director,Director=e.Director,view=e.view,Component=e.Component}],execute:function(){var _dec,_dec2,_dec3,_dec4,_dec5,_dec6,_dec7,_class,_class2,_descriptor,_descriptor2,_descriptor3,_descriptor4,_descriptor5,_descriptor6,_dec8,_dec9,_dec10,_dec11,_dec12,_class4,_class5,_descriptor7,_descriptor8,_descriptor9,_descriptor10,_dec13,_dec14,_dec15,_class7,_class8,_descriptor11;cclegacy._RF.push({},"ab516sCLNhLAa3AaQx7+yMj","TransformAdapter",void 0);var ccclass=_decorator.ccclass,property=_decorator.property,requireComponent=_decorator.requireComponent,PositionType,ResizeMode;!function(e){e[e.OriginalPosition=0]="OriginalPosition",e[e.RelativeToParent=1]="RelativeToParent",e[e.Absolute=2]="Absolute"}(PositionType||(PositionType={})),function(e){e[e.OriginalSize=0]="OriginalSize",e[e.ResizeByProps=1]="ResizeByProps",e[e.ResizeByWidth=2]="ResizeByWidth",e[e.ResizeByHeight=3]="ResizeByHeight"}(ResizeMode||(ResizeMode={}));var ResizePreset=(_dec=ccclass("ResizePreset"),_dec2=property({type:Enum(ResizeMode),tooltip:"OriginalSize - node size will remain unchanged\n            ResizeByProps - width and height will be calculated based on the settings below \n            ResizeByWidth - width will be calculated based on the settings below, height will be proportional to width \n            ResizeByHeight - height will be calculated based on the settings below, width will be proportional to height "}),_dec3=property({visible:function(){return this.resizeMode!==ResizeMode.ResizeByHeight&&this.resizeMode!==ResizeMode.OriginalSize},tooltip:"Use +, -, *, / operands to manipulate dimensions below\n\n            px - pixels\n            pw - parent width (percentage)\n            ph - parent height (percentage)\n            vw - view width (percentage)\n            vh - view height (percentage)"}),_dec4=property({visible:function(){return this.resizeMode!==ResizeMode.ResizeByWidth&&this.resizeMode!==ResizeMode.OriginalSize},tooltip:"Use +, -, *, / operands to manipulate dimensions below\n\n            px - pixels\n            pw - parent width (percentage)\n            ph - parent height (percentage)\n            vw - view width (percentage)\n            vh - view height (percentage)"}),_dec5=property({type:Enum(PositionType),tooltip:"OriginalPosition - node position will remain unchanged\n            RelativeToParent - position will be calculated from parent center\n            Absolute - position will be calculated from left-bottom angle of screen"}),_dec6=property({visible:function(){return this.positionType!==PositionType.OriginalPosition},tooltip:"Use +, -, *, / operands to manipulate dimensions below\n\n            px - pixels\n            sw - self width (percentage)\n            sh - self height (percentage)\n            pw - parent width (percentage)\n            ph - parent height (percentage)\n            vw - view width (percentage)\n            vh - view height (percentage)"}),_dec7=property({visible:function(){return this.positionType!==PositionType.OriginalPosition},tooltip:"Use +, -, *, / operands to manipulate dimensions below\n\n            px - pixels\n            sw - self width (percentage)\n            sh - self height (percentage)\n            pw - parent width (percentage)\n            ph - parent height (percentage)\n            vw - view width (percentage)\n            vh - view height (percentage)"}),_dec((_class2=function(){function ResizePreset(){_initializerDefineProperty(this,"resizeMode",_descriptor,this),_initializerDefineProperty(this,"positionType",_descriptor2,this),_initializerDefineProperty(this,"_width",_descriptor3,this),_initializerDefineProperty(this,"_height",_descriptor4,this),_initializerDefineProperty(this,"_x",_descriptor5,this),_initializerDefineProperty(this,"_y",_descriptor6,this)}var _proto=ResizePreset.prototype;return _proto._validateInputString=function(e,t){void 0===t&&(t=!1);var i=!1;if(i=t?/^(\d|px|sw|sh|pw|ph|vw|vh|\-|\+|\*|\/|\.|\s|\(|\))+$/gm.test(e):/^(\d|px|pw|ph|vw|vh|\-|\+|\*|\/|\.|\s|\(|\))+$/gm.test(e)){for(var r=0,s=0;s<e.length;++s){switch(e[s]){case"(":r++;break;case")":r--}if(r<0){i=!1;break}}i=0===r}return i?e.replace(/\s/g,""):"0px"},_proto._fillDimensions=function(e,t){var i=e;return i=(i=(i=(i=(i=(i=(i=i.replace(/px/g,"")).replace(/sw/g,"/100*"+t.selfSize.width)).replace(/sh/g,"/100*"+t.selfSize.height)).replace(/pw/g,"/100*"+t.parentSize.width)).replace(/ph/g,"/100*"+t.parentSize.height)).replace(/vw/g,"/100*"+t.viewSize.width)).replace(/vh/g,"/100*"+t.viewSize.height)},_proto.getContentSize=function getContentSize(params){var wFunc=this._fillDimensions(this.width,params),hFunc=this._fillDimensions(this.height,params);return size(eval(wFunc),eval(hFunc))},_proto.getPosition=function getPosition(params){var xFunc=this._fillDimensions(this.x,params),yFunc=this._fillDimensions(this.y,params);return v2(eval(xFunc),eval(yFunc))},_createClass(ResizePreset,[{key:"width",get:function(){return this._width},set:function(e){this._width=this._validateInputString(e)}},{key:"height",get:function(){return this._height},set:function(e){this._height=this._validateInputString(e)}},{key:"x",get:function(){return this._x},set:function(e){this._x=this._validateInputString(e,!0)}},{key:"y",get:function(){return this._y},set:function(e){this._y=this._validateInputString(e,!0)}}]),ResizePreset}(),_descriptor=_applyDecoratedDescriptor(_class2.prototype,"resizeMode",[_dec2],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ResizeMode.OriginalSize}}),_applyDecoratedDescriptor(_class2.prototype,"width",[_dec3],Object.getOwnPropertyDescriptor(_class2.prototype,"width"),_class2.prototype),_applyDecoratedDescriptor(_class2.prototype,"height",[_dec4],Object.getOwnPropertyDescriptor(_class2.prototype,"height"),_class2.prototype),_descriptor2=_applyDecoratedDescriptor(_class2.prototype,"positionType",[_dec5],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return PositionType.OriginalPosition}}),_applyDecoratedDescriptor(_class2.prototype,"x",[_dec6],Object.getOwnPropertyDescriptor(_class2.prototype,"x"),_class2.prototype),_applyDecoratedDescriptor(_class2.prototype,"y",[_dec7],Object.getOwnPropertyDescriptor(_class2.prototype,"y"),_class2.prototype),_descriptor3=_applyDecoratedDescriptor(_class2.prototype,"_width",[property],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"0px"}}),_descriptor4=_applyDecoratedDescriptor(_class2.prototype,"_height",[property],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"0px"}}),_descriptor5=_applyDecoratedDescriptor(_class2.prototype,"_x",[property],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"0px"}}),_descriptor6=_applyDecoratedDescriptor(_class2.prototype,"_y",[property],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"0px"}}),_class=_class2))||_class),ResizeMap=(_dec8=ccclass("ResizeMap"),_dec9=property({tooltip:"If the size ratio is greater than this value and less than the next, these settings will be used"}),_dec10=property({tooltip:"If TRUE the node will be resized using scale rather than changing content size"}),_dec11=property({type:ResizePreset,tooltip:"Settings for landscape orientation"}),_dec12=property({type:ResizePreset,tooltip:"Settings for portrait orientation"}),_dec8((_class5=function(){_initializerDefineProperty(this,"sizeRatio",_descriptor7,this),_initializerDefineProperty(this,"resizeByScale",_descriptor8,this),_initializerDefineProperty(this,"landscape",_descriptor9,this),_initializerDefineProperty(this,"portrait",_descriptor10,this)},_descriptor7=_applyDecoratedDescriptor(_class5.prototype,"sizeRatio",[_dec9],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_descriptor8=_applyDecoratedDescriptor(_class5.prototype,"resizeByScale",[_dec10],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_descriptor9=_applyDecoratedDescriptor(_class5.prototype,"landscape",[_dec11],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ResizePreset}}),_descriptor10=_applyDecoratedDescriptor(_class5.prototype,"portrait",[_dec12],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ResizePreset}}),_class4=_class5))||_class4),TransformAdapter=exports("TransformAdapter",(_dec13=ccclass("TransformAdapter"),_dec14=requireComponent(UITransform),_dec15=property({type:[ResizeMap]}),_dec13(_class7=_dec14((_class8=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,_initializerDefineProperty(t,"settings",_descriptor11,_assertThisInitialized(t)),t._transform=null,t._originalSize=null,t._parentSize=null,t}_inheritsLoose(t,e);var i=t.prototype;return i.onLoad=function(){this._fillPrivateProps(),this._handleResizeEvents(!0)},i._handleResizeEvents=function(e){director[e?"on":"off"](Director.EVENT_AFTER_UPDATE,this.onTransformEvent,this)},i._getTargetMap=function(e){return this.settings.sort((function(e,t){return e.sizeRatio-t.sizeRatio})).find((function(t){return t.sizeRatio<e}))},i._fillPrivateProps=function(){this._transform=this.getComponent(UITransform),this._originalSize=this._transform.contentSize;for(var e=this.node.parent;e&&!this._parentSize;){var t=e.getComponent(UITransform);t?this._parentSize=t.contentSize:e=e.parent}},i.onTransformEvent=function(){var e=view.getVisibleSize(),t=this._parentSize?this._parentSize:e.clone(),i={viewSize:e,parentSize:t,selfSize:size(0,0)},r=e.width>e.height,s=Math.max(e.width/e.height,e.height/e.width),o=this._getTargetMap(s);if(o){var n=o[r?"landscape":"portrait"];if(n.resizeMode!==ResizeMode.OriginalSize){var a=n.getContentSize(i);switch(n.resizeMode){case ResizeMode.ResizeByWidth:a.height=this._originalSize.height/this._originalSize.width*a.width;break;case ResizeMode.ResizeByHeight:a.width=this._originalSize.width/this._originalSize.height*a.height}o.resizeByScale?this.node.setScale(a.width/this._originalSize.width,a.height/this._originalSize.height):this._transform.setContentSize(a.width,a.height)}if(n.positionType!==PositionType.OriginalPosition){i.selfSize=size(this._transform.contentSize.width*this.node.scale.x,this._transform.contentSize.height*this.node.scale.y);var p=n.getPosition(i);n.positionType===PositionType.RelativeToParent&&this.node.parent&&(p.x+=this.node.parent.worldPosition.x,p.y+=this.node.parent.worldPosition.y),this.node.setWorldPosition(p.x,p.y,0)}}},_createClass(t,[{key:"tryInEditor",get:function(){return!1},set:function(e){}}]),t}(Component),_applyDecoratedDescriptor(_class8.prototype,"tryInEditor",[property],Object.getOwnPropertyDescriptor(_class8.prototype,"tryInEditor"),_class8.prototype),_descriptor11=_applyDecoratedDescriptor(_class8.prototype,"settings",[_dec15],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_class7=_class8))||_class7)||_class7));cclegacy._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});